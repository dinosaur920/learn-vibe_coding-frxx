import{Z as o}from"./C57q5Bld.js";import{u as t}from"./BskD4ZCU.js";const s=o("player",{state:()=>({playerInfo:null,token:null}),actions:{async register(e){const{data:a,error:r}=await t("/api/user/register",{method:"POST",body:e},"$pkbWiIeQNi");if(r.value)throw r.value;if(!a.value)throw new Error("注册失败");if(!a.value.success)throw new Error(a.value.message);this.playerInfo=a.value.data},async login(e){const{data:a,error:r}=await t("/api/user/login",{method:"POST",body:e},"$ShvpT786Zb");if(r.value)throw r.value;if(!a.value)throw new Error("登录失败");if(!a.value.success)throw new Error(a.value.message);this.playerInfo=a.value.data},async fetchProfile(){const{data:e,error:a}=await t("/api/user/profile",{method:"GET"},"$ZNOQHEzEyU");if(a.value)throw a.value;if(!e.value)throw new Error("获取玩家信息失败");if(!e.value.success){if(e.value.code==="AUTH_UNAUTHORIZED"){this.playerInfo=null,this.token=null;return}throw new Error(e.value.message)}this.playerInfo=e.value.data},async cultivate(){const{data:e,error:a}=await t("/api/game/cultivate",{method:"POST"},"$byfe_taCqQ");if(a.value)throw a.value;if(!e.value)throw new Error("修炼失败");if(!e.value.success){if(e.value.code==="AUTH_UNAUTHORIZED"){this.playerInfo=null,this.token=null;return}throw new Error(e.value.message)}this.playerInfo=e.value.data},async breakthrough(){const{data:e,error:a}=await t("/api/game/breakthrough",{method:"POST"},"$COMMd0azag");if(a.value)throw a.value;if(!e.value)throw new Error("突破失败");if(!e.value.success){if(e.value.code==="AUTH_UNAUTHORIZED"){this.playerInfo=null,this.token=null;return}throw new Error(e.value.message)}this.playerInfo=e.value.data},logout(){this.playerInfo=null,this.token=null}}});export{s as u};
