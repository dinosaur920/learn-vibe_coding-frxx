{"version":3,"file":"cave-B-HOdBvT.js","sources":["../../../../node_modules/vant/es/popup/shared.mjs","../../../../node_modules/vant/es/composables/use-touch.mjs","../../../../node_modules/vant/es/composables/use-lock-scroll.mjs","../../../../node_modules/vant/es/composables/use-lazy-render.mjs","../../../../node_modules/vant/es/overlay/Overlay.mjs","../../../../node_modules/vant/es/overlay/index.mjs","../../../../node_modules/vant/es/popup/Popup.mjs","../../../../node_modules/vant/es/popup/index.mjs","../../../../node_modules/vant/es/toast/lock-click.mjs","../../../../node_modules/vant/es/toast/Toast.mjs","../../../../node_modules/vant/es/toast/index.mjs","../../../../pages/cave.vue"],"sourcesContent":["import { truthProp, unknownProp, numericProp } from \"../utils/index.mjs\";\nconst popupSharedProps = {\n  // whether to show popup\n  show: Boolean,\n  // z-index\n  zIndex: numericProp,\n  // whether to show overlay\n  overlay: truthProp,\n  // transition duration\n  duration: numericProp,\n  // teleport\n  teleport: [String, Object],\n  // prevent body scroll\n  lockScroll: truthProp,\n  // whether to lazy render\n  lazyRender: truthProp,\n  // callback function before close\n  beforeClose: Function,\n  // overlay props\n  overlayProps: Object,\n  // overlay custom style\n  overlayStyle: Object,\n  // overlay custom class name\n  overlayClass: unknownProp,\n  // Initial rendering animation\n  transitionAppear: Boolean,\n  // whether to close popup when overlay is clicked\n  closeOnClickOverlay: truthProp\n};\nconst popupSharedPropKeys = Object.keys(\n  popupSharedProps\n);\nexport {\n  popupSharedPropKeys,\n  popupSharedProps\n};\n","import { ref } from \"vue\";\nimport { TAP_OFFSET } from \"../utils/index.mjs\";\nfunction getDirection(x, y) {\n  if (x > y) {\n    return \"horizontal\";\n  }\n  if (y > x) {\n    return \"vertical\";\n  }\n  return \"\";\n}\nfunction useTouch() {\n  const startX = ref(0);\n  const startY = ref(0);\n  const deltaX = ref(0);\n  const deltaY = ref(0);\n  const offsetX = ref(0);\n  const offsetY = ref(0);\n  const direction = ref(\"\");\n  const isTap = ref(true);\n  const isVertical = () => direction.value === \"vertical\";\n  const isHorizontal = () => direction.value === \"horizontal\";\n  const reset = () => {\n    deltaX.value = 0;\n    deltaY.value = 0;\n    offsetX.value = 0;\n    offsetY.value = 0;\n    direction.value = \"\";\n    isTap.value = true;\n  };\n  const start = ((event) => {\n    reset();\n    startX.value = event.touches[0].clientX;\n    startY.value = event.touches[0].clientY;\n  });\n  const move = ((event) => {\n    const touch = event.touches[0];\n    deltaX.value = (touch.clientX < 0 ? 0 : touch.clientX) - startX.value;\n    deltaY.value = touch.clientY - startY.value;\n    offsetX.value = Math.abs(deltaX.value);\n    offsetY.value = Math.abs(deltaY.value);\n    const LOCK_DIRECTION_DISTANCE = 10;\n    if (!direction.value || offsetX.value < LOCK_DIRECTION_DISTANCE && offsetY.value < LOCK_DIRECTION_DISTANCE) {\n      direction.value = getDirection(offsetX.value, offsetY.value);\n    }\n    if (isTap.value && (offsetX.value > TAP_OFFSET || offsetY.value > TAP_OFFSET)) {\n      isTap.value = false;\n    }\n  });\n  return {\n    move,\n    start,\n    reset,\n    startX,\n    startY,\n    deltaX,\n    deltaY,\n    offsetX,\n    offsetY,\n    direction,\n    isVertical,\n    isHorizontal,\n    isTap\n  };\n}\nexport {\n  useTouch\n};\n","import { watch, onBeforeUnmount, onDeactivated } from \"vue\";\nimport { getScrollParent, onMountedOrActivated } from \"@vant/use\";\nimport { useTouch } from \"./use-touch.mjs\";\nimport { preventDefault } from \"../utils/index.mjs\";\nlet totalLockCount = 0;\nconst BODY_LOCK_CLASS = \"van-overflow-hidden\";\nfunction useLockScroll(rootRef, shouldLock) {\n  const touch = useTouch();\n  const DIRECTION_UP = \"01\";\n  const DIRECTION_DOWN = \"10\";\n  const onTouchMove = (event) => {\n    touch.move(event);\n    const direction = touch.deltaY.value > 0 ? DIRECTION_DOWN : DIRECTION_UP;\n    const el = getScrollParent(\n      event.target,\n      rootRef.value\n    );\n    const { scrollHeight, offsetHeight, scrollTop } = el;\n    let status = \"11\";\n    if (scrollTop === 0) {\n      status = offsetHeight >= scrollHeight ? \"00\" : \"01\";\n    } else if (scrollTop + offsetHeight >= scrollHeight) {\n      status = \"10\";\n    }\n    if (status !== \"11\" && touch.isVertical() && !(parseInt(status, 2) & parseInt(direction, 2))) {\n      preventDefault(event, true);\n    }\n  };\n  const lock = () => {\n    document.addEventListener(\"touchstart\", touch.start);\n    document.addEventListener(\"touchmove\", onTouchMove, { passive: false });\n    if (!totalLockCount) {\n      document.body.classList.add(BODY_LOCK_CLASS);\n    }\n    totalLockCount++;\n  };\n  const unlock = () => {\n    if (totalLockCount) {\n      document.removeEventListener(\"touchstart\", touch.start);\n      document.removeEventListener(\"touchmove\", onTouchMove);\n      totalLockCount--;\n      if (!totalLockCount) {\n        document.body.classList.remove(BODY_LOCK_CLASS);\n      }\n    }\n  };\n  const init = () => shouldLock() && lock();\n  const destroy = () => shouldLock() && unlock();\n  onMountedOrActivated(init);\n  onDeactivated(destroy);\n  onBeforeUnmount(destroy);\n  watch(shouldLock, (value) => {\n    value ? lock() : unlock();\n  });\n}\nexport {\n  useLockScroll\n};\n","import { ref, watch } from \"vue\";\nfunction useLazyRender(show) {\n  const inited = ref(false);\n  watch(\n    show,\n    (value) => {\n      if (value) {\n        inited.value = value;\n      }\n    },\n    { immediate: true }\n  );\n  return (render) => () => inited.value ? render() : null;\n}\nexport {\n  useLazyRender\n};\n","import { ref, defineComponent, Teleport, Transition, vShow as _vShow, mergeProps as _mergeProps, createVNode as _createVNode, withDirectives as _withDirectives } from \"vue\";\nimport { isDef, extend, truthProp, numericProp, unknownProp, preventDefault, createNamespace, getZIndexStyle } from \"../utils/index.mjs\";\nimport { useEventListener } from \"@vant/use\";\nimport { useLazyRender } from \"../composables/use-lazy-render.mjs\";\nconst [name, bem] = createNamespace(\"overlay\");\nconst overlayProps = {\n  show: Boolean,\n  zIndex: numericProp,\n  duration: numericProp,\n  className: unknownProp,\n  lockScroll: truthProp,\n  lazyRender: truthProp,\n  customStyle: Object,\n  teleport: [String, Object]\n};\nvar stdin_default = defineComponent({\n  name,\n  inheritAttrs: false,\n  props: overlayProps,\n  setup(props, {\n    attrs,\n    slots\n  }) {\n    const root = ref();\n    const lazyRender = useLazyRender(() => props.show || !props.lazyRender);\n    const onTouchMove = (event) => {\n      if (props.lockScroll) {\n        preventDefault(event, true);\n      }\n    };\n    const renderOverlay = lazyRender(() => {\n      var _a;\n      const style = extend(getZIndexStyle(props.zIndex), props.customStyle);\n      if (isDef(props.duration)) {\n        style.animationDuration = `${props.duration}s`;\n      }\n      return _withDirectives(_createVNode(\"div\", _mergeProps({\n        \"ref\": root,\n        \"style\": style,\n        \"class\": [bem(), props.className]\n      }, attrs), [(_a = slots.default) == null ? void 0 : _a.call(slots)]), [[_vShow, props.show]]);\n    });\n    useEventListener(\"touchmove\", onTouchMove, {\n      target: root\n    });\n    return () => {\n      const Content = _createVNode(Transition, {\n        \"name\": \"van-fade\",\n        \"appear\": true\n      }, {\n        default: renderOverlay\n      });\n      if (props.teleport) {\n        return _createVNode(Teleport, {\n          \"to\": props.teleport\n        }, {\n          default: () => [Content]\n        });\n      }\n      return Content;\n    };\n  }\n});\nexport {\n  stdin_default as default,\n  overlayProps\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Overlay from \"./Overlay.mjs\";\nconst Overlay = withInstall(_Overlay);\nvar stdin_default = Overlay;\nimport { overlayProps } from \"./Overlay.mjs\";\nexport {\n  Overlay,\n  stdin_default as default,\n  overlayProps\n};\n","import { ref, watch, provide, Teleport, nextTick, computed, onMounted, Transition, onActivated, onDeactivated, defineComponent, mergeProps as _mergeProps, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, Fragment as _Fragment } from \"vue\";\nimport { popupSharedProps } from \"./shared.mjs\";\nimport { isDef, extend, makeStringProp, callInterceptor, createNamespace, HAPTICS_FEEDBACK } from \"../utils/index.mjs\";\nimport { useEventListener } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nimport { useLockScroll } from \"../composables/use-lock-scroll.mjs\";\nimport { useLazyRender } from \"../composables/use-lazy-render.mjs\";\nimport { POPUP_TOGGLE_KEY } from \"../composables/on-popup-reopen.mjs\";\nimport { useGlobalZIndex } from \"../composables/use-global-z-index.mjs\";\nimport { useScopeId } from \"../composables/use-scope-id.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nimport { Overlay } from \"../overlay/index.mjs\";\nconst popupProps = extend({}, popupSharedProps, {\n  round: Boolean,\n  position: makeStringProp(\"center\"),\n  closeIcon: makeStringProp(\"cross\"),\n  closeable: Boolean,\n  transition: String,\n  iconPrefix: String,\n  closeOnPopstate: Boolean,\n  closeIconPosition: makeStringProp(\"top-right\"),\n  destroyOnClose: Boolean,\n  safeAreaInsetTop: Boolean,\n  safeAreaInsetBottom: Boolean\n});\nconst [name, bem] = createNamespace(\"popup\");\nvar stdin_default = defineComponent({\n  name,\n  inheritAttrs: false,\n  props: popupProps,\n  emits: [\"open\", \"close\", \"opened\", \"closed\", \"keydown\", \"update:show\", \"clickOverlay\", \"clickCloseIcon\"],\n  setup(props, {\n    emit,\n    attrs,\n    slots\n  }) {\n    let opened;\n    let shouldReopen;\n    const zIndex = ref();\n    const popupRef = ref();\n    const lazyRender = useLazyRender(() => props.show || !props.lazyRender);\n    const style = computed(() => {\n      const style2 = {\n        zIndex: zIndex.value\n      };\n      if (isDef(props.duration)) {\n        const key = props.position === \"center\" ? \"animationDuration\" : \"transitionDuration\";\n        style2[key] = `${props.duration}s`;\n      }\n      return style2;\n    });\n    const open = () => {\n      if (!opened) {\n        opened = true;\n        zIndex.value = props.zIndex !== void 0 ? +props.zIndex : useGlobalZIndex();\n        emit(\"open\");\n      }\n    };\n    const close = () => {\n      if (opened) {\n        callInterceptor(props.beforeClose, {\n          done() {\n            opened = false;\n            emit(\"close\");\n            emit(\"update:show\", false);\n          }\n        });\n      }\n    };\n    const onClickOverlay = (event) => {\n      emit(\"clickOverlay\", event);\n      if (props.closeOnClickOverlay) {\n        close();\n      }\n    };\n    const renderOverlay = () => {\n      if (props.overlay) {\n        const overlayProps = extend({\n          show: props.show,\n          class: props.overlayClass,\n          zIndex: zIndex.value,\n          duration: props.duration,\n          customStyle: props.overlayStyle,\n          role: props.closeOnClickOverlay ? \"button\" : void 0,\n          tabindex: props.closeOnClickOverlay ? 0 : void 0\n        }, props.overlayProps);\n        return _createVNode(Overlay, _mergeProps(overlayProps, useScopeId(), {\n          \"onClick\": onClickOverlay\n        }), {\n          default: slots[\"overlay-content\"]\n        });\n      }\n    };\n    const onClickCloseIcon = (event) => {\n      emit(\"clickCloseIcon\", event);\n      close();\n    };\n    const renderCloseIcon = () => {\n      if (props.closeable) {\n        return _createVNode(Icon, {\n          \"role\": \"button\",\n          \"tabindex\": 0,\n          \"name\": props.closeIcon,\n          \"class\": [bem(\"close-icon\", props.closeIconPosition), HAPTICS_FEEDBACK],\n          \"classPrefix\": props.iconPrefix,\n          \"onClick\": onClickCloseIcon\n        }, null);\n      }\n    };\n    let timer;\n    const onOpened = () => {\n      if (timer) clearTimeout(timer);\n      timer = setTimeout(() => {\n        emit(\"opened\");\n      });\n    };\n    const onClosed = () => emit(\"closed\");\n    const onKeydown = (event) => emit(\"keydown\", event);\n    const renderPopup = lazyRender(() => {\n      var _a;\n      const {\n        destroyOnClose,\n        round,\n        position,\n        safeAreaInsetTop,\n        safeAreaInsetBottom,\n        show\n      } = props;\n      if (!show && destroyOnClose) {\n        return;\n      }\n      return _withDirectives(_createVNode(\"div\", _mergeProps({\n        \"ref\": popupRef,\n        \"style\": style.value,\n        \"role\": \"dialog\",\n        \"tabindex\": 0,\n        \"class\": [bem({\n          round,\n          [position]: position\n        }), {\n          \"van-safe-area-top\": safeAreaInsetTop,\n          \"van-safe-area-bottom\": safeAreaInsetBottom\n        }],\n        \"onKeydown\": onKeydown\n      }, attrs, useScopeId()), [(_a = slots.default) == null ? void 0 : _a.call(slots), renderCloseIcon()]), [[_vShow, show]]);\n    });\n    const renderTransition = () => {\n      const {\n        position,\n        transition,\n        transitionAppear\n      } = props;\n      const name2 = position === \"center\" ? \"van-fade\" : `van-popup-slide-${position}`;\n      return _createVNode(Transition, {\n        \"name\": transition || name2,\n        \"appear\": transitionAppear,\n        \"onAfterEnter\": onOpened,\n        \"onAfterLeave\": onClosed\n      }, {\n        default: renderPopup\n      });\n    };\n    watch(() => props.show, (show) => {\n      if (show && !opened) {\n        open();\n        if (attrs.tabindex === 0) {\n          nextTick(() => {\n            var _a;\n            (_a = popupRef.value) == null ? void 0 : _a.focus();\n          });\n        }\n      }\n      if (!show && opened) {\n        opened = false;\n        emit(\"close\");\n      }\n    });\n    useExpose({\n      popupRef\n    });\n    useLockScroll(popupRef, () => props.show && props.lockScroll);\n    useEventListener(\"popstate\", () => {\n      if (props.closeOnPopstate) {\n        close();\n        shouldReopen = false;\n      }\n    });\n    onMounted(() => {\n      if (props.show) {\n        open();\n      }\n    });\n    onActivated(() => {\n      if (shouldReopen) {\n        emit(\"update:show\", true);\n        shouldReopen = false;\n      }\n    });\n    onDeactivated(() => {\n      if (props.show && props.teleport) {\n        close();\n        shouldReopen = true;\n      }\n    });\n    provide(POPUP_TOGGLE_KEY, () => props.show);\n    return () => {\n      if (props.teleport) {\n        return _createVNode(Teleport, {\n          \"to\": props.teleport\n        }, {\n          default: () => [renderOverlay(), renderTransition()]\n        });\n      }\n      return _createVNode(_Fragment, null, [renderOverlay(), renderTransition()]);\n    };\n  }\n});\nexport {\n  stdin_default as default,\n  popupProps\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Popup from \"./Popup.mjs\";\nconst Popup = withInstall(_Popup);\nvar stdin_default = Popup;\nimport { popupProps } from \"./Popup.mjs\";\nexport {\n  Popup,\n  stdin_default as default,\n  popupProps\n};\n","let lockCount = 0;\nfunction lockClick(lock) {\n  if (lock) {\n    if (!lockCount) {\n      document.body.classList.add(\"van-toast--unclickable\");\n    }\n    lockCount++;\n  } else if (lockCount) {\n    lockCount--;\n    if (!lockCount) {\n      document.body.classList.remove(\"van-toast--unclickable\");\n    }\n  }\n}\nexport {\n  lockClick\n};\n","import { watch, onMounted, onUnmounted, defineComponent, createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport { pick, isDef, unknownProp, numericProp, makeStringProp, makeNumberProp, createNamespace } from \"../utils/index.mjs\";\nimport { lockClick } from \"./lock-click.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nimport { Popup } from \"../popup/index.mjs\";\nimport { Loading } from \"../loading/index.mjs\";\nconst [name, bem] = createNamespace(\"toast\");\nconst popupInheritProps = [\"show\", \"overlay\", \"teleport\", \"transition\", \"overlayClass\", \"overlayStyle\", \"closeOnClickOverlay\", \"zIndex\"];\nconst toastProps = {\n  icon: String,\n  show: Boolean,\n  type: makeStringProp(\"text\"),\n  overlay: Boolean,\n  message: numericProp,\n  iconSize: numericProp,\n  duration: makeNumberProp(2e3),\n  position: makeStringProp(\"middle\"),\n  teleport: [String, Object],\n  wordBreak: String,\n  className: unknownProp,\n  iconPrefix: String,\n  transition: makeStringProp(\"van-fade\"),\n  loadingType: String,\n  forbidClick: Boolean,\n  overlayClass: unknownProp,\n  overlayStyle: Object,\n  closeOnClick: Boolean,\n  closeOnClickOverlay: Boolean,\n  zIndex: numericProp\n};\nvar stdin_default = defineComponent({\n  name,\n  props: toastProps,\n  emits: [\"update:show\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    let timer;\n    let clickable = false;\n    const toggleClickable = () => {\n      const newValue = props.show && props.forbidClick;\n      if (clickable !== newValue) {\n        clickable = newValue;\n        lockClick(clickable);\n      }\n    };\n    const updateShow = (show) => emit(\"update:show\", show);\n    const onClick = () => {\n      if (props.closeOnClick) {\n        updateShow(false);\n      }\n    };\n    const clearTimer = () => clearTimeout(timer);\n    const renderIcon = () => {\n      const {\n        icon,\n        type,\n        iconSize,\n        iconPrefix,\n        loadingType\n      } = props;\n      const hasIcon = icon || type === \"success\" || type === \"fail\";\n      if (hasIcon) {\n        return _createVNode(Icon, {\n          \"name\": icon || type,\n          \"size\": iconSize,\n          \"class\": bem(\"icon\"),\n          \"classPrefix\": iconPrefix\n        }, null);\n      }\n      if (type === \"loading\") {\n        return _createVNode(Loading, {\n          \"class\": bem(\"loading\"),\n          \"size\": iconSize,\n          \"type\": loadingType\n        }, null);\n      }\n    };\n    const renderMessage = () => {\n      const {\n        type,\n        message\n      } = props;\n      if (slots.message) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"text\")\n        }, [slots.message()]);\n      }\n      if (isDef(message) && message !== \"\") {\n        return type === \"html\" ? _createVNode(\"div\", {\n          \"key\": 0,\n          \"class\": bem(\"text\"),\n          \"innerHTML\": String(message)\n        }, null) : _createVNode(\"div\", {\n          \"class\": bem(\"text\")\n        }, [message]);\n      }\n    };\n    watch(() => [props.show, props.forbidClick], toggleClickable);\n    watch(() => [props.show, props.type, props.message, props.duration], () => {\n      clearTimer();\n      if (props.show && props.duration > 0) {\n        timer = setTimeout(() => {\n          updateShow(false);\n        }, props.duration);\n      }\n    });\n    onMounted(toggleClickable);\n    onUnmounted(toggleClickable);\n    return () => _createVNode(Popup, _mergeProps({\n      \"class\": [bem([props.position, props.wordBreak === \"normal\" ? \"break-normal\" : props.wordBreak, {\n        [props.type]: !props.icon\n      }]), props.className],\n      \"lockScroll\": false,\n      \"onClick\": onClick,\n      \"onClosed\": clearTimer,\n      \"onUpdate:show\": updateShow\n    }, pick(props, popupInheritProps)), {\n      default: () => [renderIcon(), renderMessage()]\n    });\n  }\n});\nexport {\n  stdin_default as default,\n  toastProps\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Toast from \"./Toast.mjs\";\nconst Toast = withInstall(_Toast);\nvar stdin_default = Toast;\nimport { toastProps } from \"./Toast.mjs\";\nimport {\n  showToast,\n  closeToast,\n  showFailToast,\n  showLoadingToast,\n  showSuccessToast,\n  allowMultipleToast,\n  setToastDefaultOptions,\n  resetToastDefaultOptions\n} from \"./function-call.mjs\";\nexport {\n  Toast,\n  allowMultipleToast,\n  closeToast,\n  stdin_default as default,\n  resetToastDefaultOptions,\n  setToastDefaultOptions,\n  showFailToast,\n  showLoadingToast,\n  showSuccessToast,\n  showToast,\n  toastProps\n};\n","<template>\n  <div class=\"page\">\n    <div class=\"header\">\n      <h1 class=\"title\">洞府·药园</h1>\n      <p class=\"subtitle\">一方小院，静候灵草成熟</p>\n    </div>\n\n    <div v-if=\"plots.length > 0\" class=\"plots\">\n      <div v-for=\"plot in plots\" :key=\"plot.id\" class=\"plot-card\">\n        <div class=\"plot-header\">\n          <div class=\"plot-title\">\n            第 {{ plot.slotIndex + 1 }} 块灵田\n          </div>\n          <div class=\"plot-status\" :class=\"{\n            'plot-status-empty': plot.status === caveStatusEmpty,\n            'plot-status-growing': plot.status !== caveStatusEmpty && !plot.isMature,\n            'plot-status-ready': plot.isMature,\n          }\">\n            <span v-if=\"plot.status === caveStatusEmpty\">空置</span>\n            <span v-else-if=\"plot.isMature\">可收获</span>\n            <span v-else>生长中</span>\n          </div>\n        </div>\n\n        <div class=\"plot-body\">\n          <div class=\"row\">\n            <span class=\"label\">灵草</span>\n            <span class=\"value\">\n              <span v-if=\"plot.herbName\">{{ plot.herbName }}</span>\n              <span v-else>尚未种植</span>\n            </span>\n          </div>\n\n          <div v-if=\"plot.plantedAt\" class=\"row\">\n            <span class=\"label\">种下时间</span>\n            <span class=\"value\">\n              {{ formatTime(plot.plantedAt) }}\n            </span>\n          </div>\n\n          <div v-if=\"plot.matureAt\" class=\"row\">\n            <span class=\"label\">预计成熟</span>\n            <span class=\"value\">\n              {{ formatTime(plot.matureAt) }}\n            </span>\n          </div>\n        </div>\n\n        <div class=\"plot-actions\">\n          <van-button v-if=\"plot.status === caveStatusEmpty\" size=\"small\" type=\"primary\" block\n            :loading=\"plantingSlotIndex === plot.slotIndex && planting\" @click=\"openPlantSheet(plot.slotIndex)\">\n            种植灵草\n          </van-button>\n\n          <van-button v-else-if=\"plot.isMature\" size=\"small\" type=\"success\" block\n            :loading=\"harvestingSlotIndex === plot.slotIndex && harvesting\" @click=\"onHarvest(plot.slotIndex)\">\n            收获灵草\n          </van-button>\n\n          <van-button v-else size=\"small\" type=\"default\" block disabled>\n            正在生长\n          </van-button>\n        </div>\n      </div>\n    </div>\n\n    <div v-else class=\"empty\">\n      <p>暂未查询到洞府信息，请尝试刷新或重新登录。</p>\n    </div>\n\n    <van-popup v-model:show=\"plantPopupVisible\" position=\"center\" round class=\"plant-popup\">\n      <div class=\"plant-popup-inner\">\n        <div class=\"plant-popup-header\">\n          <div class=\"plant-popup-title\">\n            选择要种下的灵草\n          </div>\n          <van-icon name=\"cross\" class=\"plant-popup-close\" @click=\"closePlantPopup\" />\n        </div>\n        <div class=\"plant-popup-subtitle\">\n          不同品阶的灵草成熟时间与价值各不相同\n        </div>\n        <div class=\"plant-sheet\">\n          <div class=\"plant-sheet-grid\">\n            <div v-for=\"herb in herbOptions\" :key=\"herb.id\" class=\"herb-card\" :class=\"[\n              `herb-card-${herb.rarity}`,\n            ]\" @click=\"onConfirmPlant(herb.id)\">\n              <div class=\"herb-card-main\">\n                <van-icon :name=\"herb.icon\" class=\"herb-icon\" />\n                <div class=\"herb-info\">\n                  <div class=\"herb-name\">\n                    {{ herb.name }}\n                  </div>\n                  <div class=\"herb-meta\">\n                    约 {{ herb.matureMinutes }} 分钟成熟\n                  </div>\n                </div>\n              </div>\n              <div class=\"herb-tag\" :class=\"`herb-tag-${herb.rarity}`\">\n                {{ herb.rarityLabel }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onBeforeUnmount, onMounted, ref } from \"vue\"\nimport { useRouter } from \"vue-router\"\nimport { useIntervalFn } from \"@vueuse/core\"\nimport dayjs from \"dayjs\"\nimport { showToast } from \"vant\"\nimport {\n  BASIC_HERB_IDS,\n  CavePlotStatus,\n  HerbId,\n  getHerbConfig,\n} from \"~/utils/gameConstants\"\n\ntype CavePlotView = {\n  id: number\n  slotIndex: number\n  status: string\n  herbId: string | null\n  herbName: string | null\n  plantedAt: string | null\n  matureAt: string | null\n  isMature: boolean\n}\n\ntype SuccessResponse<T> = {\n  success: true\n  data: T\n}\n\ntype ErrorResponse = {\n  success: false\n  code: string\n  message: string\n}\n\ntype CaveStatusData = {\n  plots: CavePlotView[]\n}\n\ntype HerbOption = {\n  id: string\n  name: string\n  matureMinutes: number\n  icon: string\n  rarity: \"COMMON\" | \"RARE\" | \"EPIC\"\n  rarityLabel: string\n}\n\nconst router = useRouter()\n\nconst loading = ref(false)\nconst plots = ref<CavePlotView[]>([])\n\nconst plantPopupVisible = ref(false)\nconst planting = ref(false)\nconst plantingSlotIndex = ref<number | null>(null)\n\nconst harvesting = ref(false)\nconst harvestingSlotIndex = ref<number | null>(null)\n\nconst caveStatusEmpty = CavePlotStatus.EMPTY\n\nconst herbOptions = computed<HerbOption[]>(() => {\n  return BASIC_HERB_IDS.map((id) => {\n    const config = getHerbConfig(id)\n    let icon = \"flower-o\"\n    if (config.id === HerbId.SPIRIT_FRUIT || config.id === HerbId.SPIRIT_ORCHID) {\n      icon = \"fire-o\"\n    }\n    if (config.id === HerbId.SPIRIT_LOTUS) {\n      icon = \"diamond-o\"\n    }\n    return {\n      id: config.id,\n      name: config.name,\n      matureMinutes: Math.max(1, Math.round(config.matureSeconds / 60)),\n      icon,\n      rarity: config.rarity,\n      rarityLabel: config.rarityLabel,\n    }\n  })\n})\n\nconst formatTime = (iso: string | null) => {\n  if (!iso) {\n    return \"-\"\n  }\n  return dayjs(iso).format(\"HH:mm:ss\")\n}\n\nconst handleErrorResponse = (response: ErrorResponse) => {\n  if (response.code === \"AUTH_UNAUTHORIZED\") {\n    showToast(response.message)\n    router.push(\"/login\")\n    return\n  }\n  showToast(response.message)\n}\n\nconst loadStatus = async () => {\n  if (loading.value) {\n    return\n  }\n  loading.value = true\n  try {\n    const { data, error } = await useFetch<\n      SuccessResponse<CaveStatusData> | ErrorResponse\n    >(\"/api/cave/status\", {\n      method: \"GET\",\n    })\n\n    if (error.value) {\n      throw error.value\n    }\n\n    if (!data.value) {\n      throw new Error(\"加载洞府信息失败\")\n    }\n\n    if (!data.value.success) {\n      handleErrorResponse(data.value)\n      return\n    }\n\n    plots.value = data.value.data.plots\n  } catch (error: any) {\n    const message = error?.message || \"加载洞府信息失败\"\n    showToast(message)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst refresh = async () => {\n  await loadStatus()\n}\n\nconst openPlantSheet = (slotIndex: number) => {\n  plantingSlotIndex.value = slotIndex\n  plantPopupVisible.value = true\n}\n\nconst closePlantPopup = () => {\n  plantPopupVisible.value = false\n}\n\nconst onConfirmPlant = async (herbId: string) => {\n  if (planting.value) {\n    return\n  }\n  const slotIndex = plantingSlotIndex.value\n  if (slotIndex === null) {\n    plantPopupVisible.value = false\n    return\n  }\n  planting.value = true\n  try {\n    const { data, error } = await useFetch<\n      SuccessResponse<unknown> | ErrorResponse\n    >(\"/api/cave/plant\", {\n      method: \"POST\",\n      body: {\n        slotIndex,\n        herbId,\n      },\n    })\n\n    if (error.value) {\n      throw error.value\n    }\n\n    if (!data.value) {\n      throw new Error(\"种植失败\")\n    }\n\n    if (!data.value.success) {\n      handleErrorResponse(data.value)\n      return\n    }\n\n    showToast(\"种植成功\")\n    plantPopupVisible.value = false\n    await loadStatus()\n  } catch (error: any) {\n    const message = error?.message || \"种植失败，请稍后重试\"\n    showToast(message)\n  } finally {\n    planting.value = false\n    plantingSlotIndex.value = null\n  }\n}\n\nconst onHarvest = async (slotIndex: number) => {\n  if (harvesting.value) {\n    return\n  }\n  harvesting.value = true\n  harvestingSlotIndex.value = slotIndex\n  try {\n    const { data, error } = await useFetch<\n      SuccessResponse<{ harvest: { herbName: string } }> | ErrorResponse\n    >(\"/api/cave/harvest\", {\n      method: \"POST\",\n      body: {\n        slotIndex,\n      },\n    })\n\n    if (error.value) {\n      throw error.value\n    }\n\n    if (!data.value) {\n      throw new Error(\"收获失败\")\n    }\n\n    if (!data.value.success) {\n      handleErrorResponse(data.value)\n      return\n    }\n\n    const name = data.value.data.harvest.herbName\n    if (name) {\n      showToast(`收获到 ${name}`)\n    } else {\n      showToast(\"收获成功\")\n    }\n\n    await loadStatus()\n  } catch (error: any) {\n    const message = error?.message || \"收获失败，请稍后重试\"\n    showToast(message)\n  } finally {\n    harvesting.value = false\n    harvestingSlotIndex.value = null\n  }\n}\n\nconst { pause, resume } = useIntervalFn(\n  () => {\n    loadStatus()\n  },\n  5000,\n  {\n    immediate: false,\n  }\n)\n\nonMounted(async () => {\n  await loadStatus()\n  resume()\n})\n\nonBeforeUnmount(() => {\n  pause()\n})\n</script>\n\n<style scoped>\n.page {\n  min-height: 100vh;\n  padding: 24px 16px 80px;\n  box-sizing: border-box;\n  background: #0b1020;\n  color: #f5f5f5;\n}\n\n.header {\n  text-align: center;\n  margin-bottom: 12px;\n}\n\n.title {\n  margin: 0 0 4px;\n  font-size: 20px;\n}\n\n.subtitle {\n  margin: 0;\n  font-size: 13px;\n  color: #c9c9c9;\n}\n\n.plots {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  gap: 12px;\n}\n\n.plot-card {\n  padding: 12px;\n  border-radius: 10px;\n  background: rgba(15, 22, 40, 0.9);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 8px;\n  min-height: 150px;\n}\n\n.plot-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.plot-title {\n  font-size: 14px;\n}\n\n.plot-status {\n  padding: 2px 6px;\n  border-radius: 999px;\n  font-size: 11px;\n}\n\n.plot-status-empty {\n  background: rgba(120, 120, 120, 0.24);\n  color: #e0e0e0;\n}\n\n.plot-status-growing {\n  background: rgba(56, 189, 248, 0.16);\n  color: #38bdf8;\n}\n\n.plot-status-ready {\n  background: rgba(74, 222, 128, 0.16);\n  color: #4ade80;\n}\n\n.plot-body {\n  font-size: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.label {\n  color: #a3a3a3;\n}\n\n.value {\n  color: #f5f5f5;\n}\n\n.plot-actions {\n  margin-top: 4px;\n}\n\n.empty {\n  margin-top: 40px;\n  text-align: center;\n  font-size: 14px;\n  color: #c9c9c9;\n}\n\n.plant-popup {\n  width: 88%;\n  max-width: 420px;\n}\n\n.plant-popup-inner {\n  padding: 16px 14px 14px;\n  background: radial-gradient(circle at top, #020617 0, #020617 45%, #020617 100%);\n  border-radius: 16px;\n  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.9);\n  color: #e5e7eb;\n}\n\n.plant-popup-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.plant-popup-title {\n  font-size: 16px;\n}\n\n.plant-popup-close {\n  font-size: 18px;\n  color: #9ca3af;\n}\n\n.plant-popup-subtitle {\n  margin-top: 6px;\n  font-size: 11px;\n  color: #9ca3af;\n}\n\n.plant-sheet {\n  margin-top: 12px;\n  max-height: 320px;\n  overflow-y: auto;\n}\n\n.plant-sheet-grid {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  gap: 12px;\n}\n\n.herb-card {\n  border-radius: 10px;\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-height: 72px;\n  cursor: pointer;\n  box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.35);\n  transition: transform 0.12s ease-out, box-shadow 0.12s ease-out,\n    background 0.12s ease-out;\n}\n\n.herb-card-COMMON {\n  background: linear-gradient(135deg, #0f172a 0%, #020617 60%);\n}\n\n.herb-card-RARE {\n  background: radial-gradient(circle at top left, #0f172a 0, #1d283a 40%, #020617 80%);\n}\n\n.herb-card-EPIC {\n  background: radial-gradient(circle at top left, #4c1d95 0, #1e293b 45%, #020617 90%);\n}\n\n.herb-card:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 0 0 1px rgba(248, 250, 252, 0.3),\n    0 8px 16px rgba(15, 23, 42, 0.8);\n}\n\n.herb-card-main {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.herb-icon {\n  font-size: 24px;\n  color: #f97316;\n}\n\n.herb-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.herb-name {\n  font-size: 14px;\n  color: #e5e7eb;\n}\n\n.herb-meta {\n  font-size: 11px;\n  color: #9ca3af;\n}\n\n.herb-tag {\n  margin-top: 6px;\n  align-self: flex-end;\n  font-size: 10px;\n  padding: 2px 6px;\n  border-radius: 999px;\n  border: 1px solid rgba(248, 250, 252, 0.4);\n  color: #f9fafb;\n}\n\n.herb-tag-COMMON {\n  border-color: #6b7280;\n  color: #e5e7eb;\n}\n\n.herb-tag-RARE {\n  border-color: #38bdf8;\n  color: #7dd3fc;\n}\n\n.herb-tag-EPIC {\n  border-color: #a855f7;\n  color: #e879f9;\n}\n</style>\n"],"names":["name","bem","stdin_default","_withDirectives","_createVNode","_mergeProps","_vShow","_Overlay","overlayProps","_Fragment","_Popup","_Toast","_ssrRenderAttrs","_ssrRenderList","_unref","_ssrInterpolate","_openBlock","_createBlock","_renderList","_toDisplayString"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}